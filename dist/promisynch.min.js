!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("@babel/runtime/helpers/typeof")):"function"==typeof define&&define.amd?define(["@babel/runtime/helpers/typeof"],r):t.Promisynch=r(t._typeof)}(this,function(r){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;function e(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}function n(t){return!0===e(t)&&"[object Object]"===Object.prototype.toString.call(t)}function u(t){if(void 0===t)return"undefined";if(null===t)return"null";var r,e=typeof t;if("boolean"===e)return"boolean";if("string"===e)return"string";if("number"===e)return"number";if("symbol"===e)return"symbol";if("function"===e)return"GeneratorFunction"===o(t)?"generatorfunction":"function";if(r=t,Array.isArray?Array.isArray(r):r instanceof Array)return"array";if(function(t){if(t.constructor&&"function"==typeof t.constructor.isBuffer)return t.constructor.isBuffer(t);return!1}(t))return"buffer";if(function(t){try{if("number"==typeof t.length&&"function"==typeof t.callee)return!0}catch(t){if(~t.message.indexOf("callee"))return!0}return!1}(t))return"arguments";if((r=t)instanceof Date||"function"==typeof r.toDateString&&"function"==typeof r.getDate&&"function"==typeof r.setDate)return"date";if((r=t)instanceof Error||"string"==typeof r.message&&r.constructor&&"number"==typeof r.constructor.stackTraceLimit)return"error";if((r=t)instanceof RegExp||"string"==typeof r.flags&&"boolean"==typeof r.ignoreCase&&"boolean"==typeof r.multiline&&"boolean"==typeof r.global)return"regexp";switch(o(t)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if("function"==typeof(r=t).throw&&"function"==typeof r.return&&"function"==typeof r.next)return"generator";switch(e=i.call(t)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return e.slice(8,-1).toLowerCase().replace(/\s/g,"")}var i=Object.prototype.toString;function o(t){return"function"==typeof t.constructor?t.constructor.name:null}var a={};["Array","Number","Function","RegExp","Boolean","Date","Error","Arguments","Null","String"].forEach(function(r){a[r]=function(t){return u(t)===r.toLowerCase()}});var s=Object.assign(a,{Undefined:function(t){return null==t},Defined:function(t){return null!=t},Element:function(t){return"object"===r(t)&&1===t.nodeType},Window:function(t){return null!=t&&t===t.window},Document:function(t){return"object"===r(t)&&9===t.nodeType},PlainObject:function(t){return!1!==n(t)&&("function"==typeof(t=t.constructor)&&(!1!==n(t=t.prototype)&&!1!=t.hasOwnProperty("isPrototypeOf")))},Object:e,ArrayLike:function(t){t=e(t=t)?t.length:void 0;return a.Number(t)&&0<=t&&t<=9007199254740991},classOf:function(r){return function(t){return t instanceof r}},oneOfType:function(t){return function(e){return t.reduce(function(t,r){r="is".concat(r[0].toUpperCase()+r.slice(1));return a[r]?t||a[r](e):t||!1},!1)}},oneOf:function(r){return function(t){return!!~r.indexOf(t)}}}),c=function(t,r,e,n,u,i,o,a){var s,c,f;if(!t)throw void 0===r?f=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(s=[e,n,u,i,o,a],c=0,(f=Error(r.replace(/%s/g,function(){return s[c++]}))).name="Invariant Violation"),f.framesToPop=1,f};function f(){for(var t=arguments.length,r=Array(t),e=0;e<t;e++)r[e]=arguments[e];if(0===r.length)return function(t){return t};if(1===r.length)return r[0];var n=r[r.length-1],u=r.slice(0,-1);return function(){return u.reduceRight(function(t,r){return r(t)},n.apply(void 0,arguments))}}var l=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},t=function(t,r,e){return r&&h(t.prototype,r),e&&h(t,e),t};function h(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function p(){}var v="pending",b="resolved",d="rejected";function g(t,r){t.status=r}function m(t){return function(r){try{return g(r.chain,r.err?d:b),t(r)}catch(t){throw r.err=t,r.result=[t],g(r.chain,d),t}}}function j(t){return function(r){try{return t(r)}catch(t){return Object.assign(r,{err:t,result:[t]})}}}function A(t){return function(r){try{return t(r)}catch(t){if(!0===r.chain._silent)return Object.assign(r,{err:t,result:[t]});var e=setTimeout(function(){throw t});return Object.assign(r,{err:t,timer:e,result:[t]})}}}function O(r){return function(t){if(r.apply(void 0,[t.err||null,t.err?null:t.result].concat(y(t.argument))),null!==t.err)throw t.err;return t}}function _(r){return function(t){return r.apply(void 0,[t.err||null,t.err?null:t.result].concat(y(t.argument))),t}}function w(t){return function(r){if(!0!==r.chain._silent)return t(r);try{return t(r)}catch(t){return Object.assign(r,{err:t,result:[t]})}}}function k(r){return function(t){t=Object.assign({},t);return null!==t.err||(s.Defined(t.result)?t.result=r(t.result):t.result=r.apply(void 0,y(t.argument))),t}}function E(r){return function(t){t=Object.assign({},t);return null===t.err?t:(t.timer&&(clearTimeout(t.timer),delete t.timer),t.result=r(t.err),Object.assign(t,!0===t.chain._bubble?{}:{err:null}))}}var x=function(t,r){r=f(w,m,k)(r);return t?f(r,t):r},D=function(t,r){r=f(w,E)(r);return t?f(r,j(t)):r},S=function(t,r){r=f(w,O)(r);return t?f(r,j(t)):r},I=function(t){return f(A,m,k)(t)},P=function(t){return f(A,E)(t)},T=function(t){return f(A,_)(t)};function F(t){var e;l(this,F),this.status=v,this.value=null,this.funcs=null,c(s.Function(e=t),"You must pass a resolver function as the first argument to the chain constructor"),function(t,r){try{e(t,r)}catch(t){r(t)}}(this.resolve.bind(this),this.reject.bind(this))}return t(F,null,[{key:"of",value:function(t){return new F(t||p)}},{key:"resolve",value:function(r){return F.of(function(t){return t(r)})}},{key:"reject",value:function(e){return F.of(function(t,r){return r(e)})}},{key:"all",value:function(t){var e=F.of(),n=Array.from(t);return n.forEach(function(t){t.finally(function(){var t,r;t=n,e.status===v&&(t.some(function(t){return t.status===d})?(r=t.find(function(t){return t.status===d}),e.reject(r.value)):t.every(function(t){return t.status!==v})&&e.resolve(t.map(function(t){return t.value})))}).catch(p)}),e}},{key:"race",value:function(t){var r=F.of(),e=Array.from(t);return e.forEach(function(t){t.finally(function(){var t;t=e,r.status===v&&((t=t.find(function(t){return t.status!==v})).status===d?r.reject(t.value):r.resolve(t.value))}).catch(p)}),r}},{key:"silent",value:function(t){if(s.Function(t)){var r=F.of(t);return r._silent=!0,r}return t._silent=!0,t}},{key:"bubble",value:function(t){if(s.Function(t)){var r=F.of(t);return r._bubble=!0,r}return t._bubble=!0,t}}]),t(F,[{key:"resolve",value:function(){for(var t,r,e=arguments.length,n=Array(e),u=0;u<e;u++)n[u]=arguments[u];return this.status===v&&(this.status=b,t={err:null,result:void 0,argument:n,chain:this},this.value=0===(r=n).length?null:1===r.length?r[0]:r,this.funcs?(t=this.funcs(t),0===n.length&&(this.value=t.result),delete this.funcs):this._set=t),this}},{key:"reject",value:function(t){var r;return this.status===v&&(this.status=d,r={err:t,result:void 0,argument:[t],chain:this},this.value=s.Defined(t)?t:null,this.funcs?(r=this.funcs(r),s.Undefined(t)&&(this.value=r.result),delete this.funcs):this._set=r),this}},{key:"then",value:function(t,r){return this.status===v?(t&&(this.funcs=x(this.funcs,t)),r&&(this.funcs=D(this.funcs,r))):(t&&(this._set=I(t)(this._set),this.value=this._set.result),r&&(this._set=P(r)(this._set),this.value=this._set.result)),this}},{key:"catch",value:function(t){return this.status===v?t&&(this.funcs=D(this.funcs,t)):t&&(this._set=P(t)(this._set),this.value=this._set.result),this}},{key:"finally",value:function(t){return this.status===v?t&&(this.funcs=S(this.funcs,t)):t&&(this._set=T(t)(this._set),this.value=this._set.result),this}}]),F});
